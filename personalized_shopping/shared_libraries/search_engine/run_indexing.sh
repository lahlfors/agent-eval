#!/bin/bash
# ... license headers ...

CURRENT_DIR=$(pwd)
INDEX_DIR="indexes"
RESOURCES_DIR="resources_1k"
INDEX_1K="${INDEX_DIR}/indexes_1k"

mkdir -p "${INDEX_DIR}"

echo "Indexing 1k products from ${RESOURCES_DIR} to ${INDEX_1K}..."
poetry run python -m pyserini.index.lucene \
  --collection JsonCollection \
  --input "${RESOURCES_DIR}" \
  --index "${INDEX_1K}" \
  --generator DefaultLuceneDocumentGenerator \
  --threads 1 \
  --storePositions --storeDocvectors --storeRaw

# Comment out other sizes as they are not generated by the python script
# ...

echo "Indexing complete."
